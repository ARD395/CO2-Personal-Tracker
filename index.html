<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸŒ¿ EcoSathi - Carbon Footprint Calculator</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script src="https://kit.fontawesome.com/ef6f3bed2b.js" crossorigin="anonymous"></script>


  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Sans+Hegarty&family=Bebas+Neue&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
  <main class="app">
    <!-- Page Sections -->
    <section id="tab-calculator" class="tab active-tab">
      <div class="form">
        <form id="ecoForm">

        <fieldset>
          <legend>Electricity Usage</legend>
          <label for="electricity">Electricity used this month (in units/kWh from your bill):</label>
          <input type="number" id="electricity" min="0" step="1" required>
          </fieldset>

        <fieldset>
          <legend>Water Usage</legend>
          <label for="water">Approximate water used per day (in litres):</label>
          <input type="number" id="water" min="0" step="1" required>
          <label for="reuse">Do you reuse water for plants or cleaning?</label>
          <select id="reuse">
            <option>No</option>
            <option>Yes</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Travel and Transport</legend>
          <label for="distance">Distance travelled per day (in kilometres):</label>
          <input type="number" id="distance" min="0" step="0.1" required>

          <label for="transport">Main mode of transport:</label>
          <select id="transport">
            <option>Walking / Bicycle</option>
            <option>Two-Wheeler</option>
            <option>Car</option>
            <option>Bus</option>
            <option>Train</option>
            <option>Electric Vehicle</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Sustainable Habits</legend>
          <label for="solar">Do you use solar energy at home?</label>
          <select id="solar">
            <option>No</option>
            <option>Yes</option>
          </select>

          <label for="segregate">Do you segregate household waste?</label>
          <select id="segregate">
            <option>No</option>
            <option>Yes</option>
          </select>

          <label for="lights">Do you switch off lights/fans when not in use?</label>
          <select id="lights">
            <option>Always</option>
            <option>Sometimes</option>
            <option>Never</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Trees and Green Cover</legend>
          <label for="trees">Number of trees planted this year:</label>
          <input type="number" id="trees" min="0" step="1" required>
        </fieldset>

        <button type="button" onclick="calculateCO2()">Calculate My Eco Score</button>
      </form>

      <div id="resultPopup" class="popup">
        <div class="popup-content">
          <span class="close-btn" onclick="closePopup()">&times;</span>
          <div id="popupResult"></div>
        </div>
      </div>

      <div id="filler"></div>
      </div>
      <div class="earth-img">
        <img src="Images/earth.png" alt="earth">
      </div>
      
    </section>

    <section id="tab-ai" class="tab">
      <div class="chat-container">
        <div class="chat-header">
          <h2><i class="fa-solid fa-robot"></i> EcoSathi AI Assistant</h2>
          <p>Ask me anything about sustainability ðŸŒ¿</p>
        </div>

        <div class="chat-box" id="chat-box">
          <!-- Chat messages will appear here dynamically -->
          <!-- Example static messages -->
          <div class="message ai-message">
            <div class="message-content">
              Hello! I'm your EcoSathi AI. How may I assist you today?
            </div>
          </div>
        </div>

        <div class="chat-input-area">
          <input type="text" id="user-input" placeholder="Type your message..." />
          <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
      </div>
    </section>

    <section id="tab-profile" class="tab">
      <div class="profile-details">
        <div class="profile-icon">
          <img src="Images/profile-pic.jpg" alt="profile-pic">
        </div>
        <div class="profile-name">
          <p>John Berryman</p>
        </div>
        <div class="profile-score">
          <h5>Profile Score</h5>
          <p id="lastCalculatedCO2">7839</p>
        </div>
        <button onclick="downloadJSONFile()">Download JSON</button>
        <button onclick="clearHistory()">Clear History</button>


        <div class="notification-section">
          <button type="button" onclick="requestNotificationPermission()" title="Enable Notifications">
            <i class="fa-solid fa-bell"></i>
          </button>
          <button type="button" onclick="sendRandomNotification()" title="Test Notification">
            <i class="fa-solid fa-paper-plane"></i>
          </button>
        </div>
      </div>

      <div class="scroll-section profile-scroll">
        <div id="historyContainer">
          <h3>Your Eco History</h3>
          <table id="historyTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>COâ‚‚ (g/day)</th>
                <th>Transport</th>
                <th>Electricity (kWh)</th>
                <th>Water (L)</th>
                <th>Trees</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div style="width: 90%; max-width: 900px; margin: 20px auto;">
          <canvas id="co2Chart"></canvas>
        </div>


        <div class="profile-tree">
          <img src="Images/tree.png" alt="tree">
        </div>
      </div>
    </section>





    <!-- Navigation Bar -->
    <nav class="nav-bar">
      <svg class="nav-icon active-icon" data-tab="tab-calculator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M192 64C156.7 64 128 92.7 128 128L128 512C128 547.3 156.7 576 192 576L448 576C483.3 576 512 547.3 512 512L512 128C512 92.7 483.3 64 448 64L192 64zM224 128L416 128C433.7 128 448 142.3 448 160L448 192C448 209.7 433.7 224 416 224L224 224C206.3 224 192 209.7 192 192L192 160C192 142.3 206.3 128 224 128zM240 296C240 309.3 229.3 320 216 320C202.7 320 192 309.3 192 296C192 282.7 202.7 272 216 272C229.3 272 240 282.7 240 296zM320 320C306.7 320 296 309.3 296 296C296 282.7 306.7 272 320 272C333.3 272 344 282.7 344 296C344 309.3 333.3 320 320 320zM448 296C448 309.3 437.3 320 424 320C410.7 320 400 309.3 400 296C400 282.7 410.7 272 424 272C437.3 272 448 282.7 448 296zM216 416C202.7 416 192 405.3 192 392C192 378.7 202.7 368 216 368C229.3 368 240 378.7 240 392C240 405.3 229.3 416 216 416zM344 392C344 405.3 333.3 416 320 416C306.7 416 296 405.3 296 392C296 378.7 306.7 368 320 368C333.3 368 344 378.7 344 392zM424 416C410.7 416 400 405.3 400 392C400 378.7 410.7 368 424 368C437.3 368 448 378.7 448 392C448 405.3 437.3 416 424 416zM192 488C192 474.7 202.7 464 216 464L328 464C341.3 464 352 474.7 352 488C352 501.3 341.3 512 328 512L216 512C202.7 512 192 501.3 192 488zM424 464C437.3 464 448 474.7 448 488C448 501.3 437.3 512 424 512C410.7 512 400 501.3 400 488C400 474.7 410.7 464 424 464z"/>
      </svg>

      <svg class="nav-icon" data-tab="tab-ai" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M320 64C302.3 64 288 78.3 288 96L288 99.2C215 114 160 178.6 160 256L160 277.7C160 325.8 143.6 372.5 113.6 410.1L103.8 422.3C98.7 428.6 96 436.4 96 444.5C96 464.1 111.9 480 131.5 480L508.4 480C528 480 543.9 464.1 543.9 444.5C543.9 436.4 541.2 428.6 536.1 422.3L526.3 410.1C496.4 372.5 480 325.8 480 277.7L480 256C480 178.6 425 114 352 99.2L352 96C352 78.3 337.7 64 320 64zM258 528C265.1 555.6 290.2 576 320 576C349.8 576 374.9 555.6 382 528L258 528z"/>
      </svg>

      <svg class="nav-icon" data-tab="tab-profile" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/>
      </svg>
    </nav>
  </main>

  <script src="script.js"></script>
</body>
</html>
