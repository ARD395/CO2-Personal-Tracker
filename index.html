<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸŒ¿ EcoSathi - Carbon Footprint Calculator</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script src="https://kit.fontawesome.com/ef6f3bed2b.js" crossorigin="anonymous"></script>


  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=BBH+Sans+Hegarty&family=Bebas+Neue&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
  <main class="app">
    <!-- Page Sections -->
    <section id="tab-calculator" class="tab active-tab">
      <div class="form">
        <form id="ecoForm">

        <fieldset>
          <legend>Electricity Usage</legend>
          <label for="electricity">Electricity used this month (in units/kWh from your bill):</label>
          <input type="number" id="electricity" min="0" step="1" required>
          </fieldset>

        <fieldset>
          <legend>Water Usage</legend>
          <label for="water">Approximate water used per day (in litres):</label>
          <input type="number" id="water" min="0" step="1" required>
          <label for="reuse">Do you reuse water for plants or cleaning?</label>
          <select id="reuse">
            <option>No</option>
            <option>Yes</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Travel and Transport</legend>
          <label for="distance">Distance travelled per day (in kilometres):</label>
          <input type="number" id="distance" min="0" step="0.1" required>

          <label for="transport">Main mode of transport:</label>
          <select id="transport">
            <option>Walking / Bicycle</option>
            <option>Two-Wheeler</option>
            <option>Car</option>
            <option>Bus</option>
            <option>Train</option>
            <option>Electric Vehicle</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Sustainable Habits</legend>
          <label for="solar">Do you use solar energy at home?</label>
          <select id="solar">
            <option>No</option>
            <option>Yes</option>
          </select>

          <label for="segregate">Do you segregate household waste?</label>
          <select id="segregate">
            <option>No</option>
            <option>Yes</option>
          </select>

          <label for="lights">Do you switch off lights/fans when not in use?</label>
          <select id="lights">
            <option>Always</option>
            <option>Sometimes</option>
            <option>Never</option>
          </select>
        </fieldset>

        <fieldset>
          <legend>Trees and Green Cover</legend>
          <label for="trees">Number of trees planted this year:</label>
          <input type="number" id="trees" min="0" step="1" required>
        </fieldset>

        <button type="button" onclick="calculateCO2()">Calculate My Eco Score</button>
      </form>

      <div id="resultPopup" class="popup">
        <div class="popup-content">
          <span class="close-btn" onclick="closePopup()">&times;</span>
          <div id="popupResult"></div>
        </div>
      </div>

      <div id="filler"></div>
      </div>
      <div class="earth-img">
        <img src="Images/earth.png" alt="earth">
      </div>
      
    </section>

    <section id="tab-ai" class="tab">
      <div class="chat-container">
        <div class="chat-header">
          <h2><i class="fa-solid fa-robot"></i> EcoSathi AI Assistant</h2>
          <p>Ask me anything about sustainability ğŸŒ¿</p>
        </div>

        <div class="chat-box" id="chat-box">
          <!-- Chat messages will appear here dynamically -->
          <!-- Example static messages -->
          <div class="message ai-message">
            <div class="message-content">
              Hello! I'm your EcoSathi AI. How may I assist you today?
            </div>
          </div>
        </div>

        <div class="chat-input-area">
          <input type="text" id="user-input" placeholder="Type your message..." />
          <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button>
        </div>
      </div>
    </section>

    <section id="tab-impact" class="tab">
      <div class="impact-container">

        <h2 class="impact-heading">ğŸŒ Eco Impact Hub</h2>
        <p class="impact-intro">
          Explore daily challenges, pledges, and mindful eco activities that make a difference.
        </p>

        <button id="resetImpact" onclick="resetImpactTab()">â™»ï¸ Reset Impact</button>

        <div class="impact-grid">
          <!-- Daily Eco Challenge -->
          <div class="impact-card wide-card" id="dailyEcoChallenge">
            <h2>ğŸŒ± Daily Eco Challenge</h2>
            <p>Complete small green actions every day to grow your positive impact!</p>

            <ul id="challengeList">
              <li>
                <p>Turn your lights off for one hour! ğŸ’¡</p>
                <input type="checkbox" name="challenge1" onchange="toggleChallenge(this)">
              </li>
              <li>
                <p>Use a reusable water bottle instead of plastic ğŸ§´</p>
                <input type="checkbox" name="challenge2" onchange="toggleChallenge(this)">
              </li>
              <li>
                <p>Walk or cycle instead of driving ğŸš¶â€â™€ï¸</p>
                <input type="checkbox" name="challenge3" onchange="toggleChallenge(this)">
              </li>
              <li>
                <p>Plant or water a tree ğŸŒ³</p>
                <input type="checkbox" name="challenge4" onchange="toggleChallenge(this)">
              </li>
              <li>
                <p>Avoid single-use plastic today â™»ï¸</p>
                <input type="checkbox" name="challenge5" onchange="toggleChallenge(this)">
              </li>
            </ul>

            <p id="streakDisplay">ğŸ”¥ Streak: <span id="ecoStreak">0</span> days</p>
          </div>

          <!-- Pledge Board -->
          <div class="impact-card" id="pledgeBoard">
            <h2>ğŸ¤ Eco Pledge Board</h2>
            <input type="text" id="pledgeInput" placeholder="Write your eco pledge..." />
            <button onclick="addPledge()">Add</button>
            <ul id="pledgeList"></ul>
          </div>

          <!-- Water Reminder -->
          <div class="impact-card tall-card">
            <h2>ğŸ’§ Water Saver</h2>
            <p>Gentle reminders to save water every 3 hours.</p>
            <button onclick="sendWaterReminder()">Test Reminder</button>
          </div>

          <!-- Eco Tip Sharing -->
          <div class="impact-card small-card">
            <h2>ğŸ“¤ Share Eco Tip</h2>
            <p>Spread a random eco fact with friends!</p>
            <button onclick="shareEcoTip()">Share Tip</button>
          </div>

          <!-- Carbon Offset -->
          <div class="impact-card">
            <h2>ğŸŒ³ Carbon Offset Tracker</h2>
            <p id="offsetText">Calculate your footprint to see offset goals.</p>
          </div>

          <!-- Mood Tracker -->
          <div class="impact-card wide-card">
            <h2>â˜€ï¸ Eco Mood Tracker</h2>
            <div class="mood-buttons">
              <button onclick="setMood('ğŸ˜Š')">ğŸ˜Š</button>
              <button onclick="setMood('ğŸŒ¿')">ğŸŒ¿</button>
              <button onclick="setMood('ğŸ˜')">ğŸ˜</button>
              <button onclick="setMood('ğŸ˜”')">ğŸ˜”</button>
            </div>
            <canvas id="moodChart" width="280" height="150"></canvas>
          </div>
        </div>
        <div id="filler"></div>
      </div>
    </section>

    <section id="tab-profile" class="tab">
      <div class="profile-details">
        <div class="profile-icon">
          <img src="Images/profile-pic.jpg" alt="profile-pic">
        </div>
        <div class="profile-name">
          <p>John Berryman</p>
        </div>
        <div class="profile-score">
          <h5>Profile Score</h5>
          <p id="lastCalculatedCO2">7839</p>
        </div>
        <button onclick="downloadJSONFile()">Download JSON</button>
        <button onclick="clearHistory()">Clear History</button>


        <div class="notification-section">
          <button type="button" onclick="requestNotificationPermission()" title="Enable Notifications">
            <i class="fa-solid fa-bell"></i>
          </button>
          <button type="button" onclick="sendRandomNotification()" title="Test Notification">
            <i class="fa-solid fa-paper-plane"></i>
          </button>
        </div>
      </div>

      <div class="scroll-section profile-scroll">
        <div id="historyContainer">
          <h3>Your Eco History</h3>
          <table id="historyTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>COâ‚‚ (g/day)</th>
                <th>Transport</th>
                <th>Electricity (kWh)</th>
                <th>Water (L)</th>
                <th>Trees</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div style="width: 90%; max-width: 900px; margin: 20px auto;">
          <canvas id="co2Chart"></canvas>
        </div>
      </div>
    </section>


    
    <!-- Navigation Bar -->
    <nav class="nav-bar">
      <svg class="nav-icon active-icon" data-tab="tab-calculator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M192 64C156.7 64 128 92.7 128 128L128 512C128 547.3 156.7 576 192 576L448 576C483.3 576 512 547.3 512 512L512 128C512 92.7 483.3 64 448 64L192 64zM224 128L416 128C433.7 128 448 142.3 448 160L448 192C448 209.7 433.7 224 416 224L224 224C206.3 224 192 209.7 192 192L192 160C192 142.3 206.3 128 224 128zM240 296C240 309.3 229.3 320 216 320C202.7 320 192 309.3 192 296C192 282.7 202.7 272 216 272C229.3 272 240 282.7 240 296zM320 320C306.7 320 296 309.3 296 296C296 282.7 306.7 272 320 272C333.3 272 344 282.7 344 296C344 309.3 333.3 320 320 320zM448 296C448 309.3 437.3 320 424 320C410.7 320 400 309.3 400 296C400 282.7 410.7 272 424 272C437.3 272 448 282.7 448 296zM216 416C202.7 416 192 405.3 192 392C192 378.7 202.7 368 216 368C229.3 368 240 378.7 240 392C240 405.3 229.3 416 216 416zM344 392C344 405.3 333.3 416 320 416C306.7 416 296 405.3 296 392C296 378.7 306.7 368 320 368C333.3 368 344 378.7 344 392zM424 416C410.7 416 400 405.3 400 392C400 378.7 410.7 368 424 368C437.3 368 448 378.7 448 392C448 405.3 437.3 416 424 416zM192 488C192 474.7 202.7 464 216 464L328 464C341.3 464 352 474.7 352 488C352 501.3 341.3 512 328 512L216 512C202.7 512 192 501.3 192 488zM424 464C437.3 464 448 474.7 448 488C448 501.3 437.3 512 424 512C410.7 512 400 501.3 400 488C400 474.7 410.7 464 424 464z"/>
      </svg>

      <svg class="nav-icon" data-tab="tab-ai" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M352 64C352 46.3 337.7 32 320 32C302.3 32 288 46.3 288 64L288 128L192 128C139 128 96 171 96 224L96 448C96 501 139 544 192 544L448 544C501 544 544 501 544 448L544 224C544 171 501 128 448 128L352 128L352 64zM160 432C160 418.7 170.7 408 184 408L216 408C229.3 408 240 418.7 240 432C240 445.3 229.3 456 216 456L184 456C170.7 456 160 445.3 160 432zM280 432C280 418.7 290.7 408 304 408L336 408C349.3 408 360 418.7 360 432C360 445.3 349.3 456 336 456L304 456C290.7 456 280 445.3 280 432zM400 432C400 418.7 410.7 408 424 408L456 408C469.3 408 480 418.7 480 432C480 445.3 469.3 456 456 456L424 456C410.7 456 400 445.3 400 432zM224 240C250.5 240 272 261.5 272 288C272 314.5 250.5 336 224 336C197.5 336 176 314.5 176 288C176 261.5 197.5 240 224 240zM368 288C368 261.5 389.5 240 416 240C442.5 240 464 261.5 464 288C464 314.5 442.5 336 416 336C389.5 336 368 314.5 368 288zM64 288C64 270.3 49.7 256 32 256C14.3 256 0 270.3 0 288L0 384C0 401.7 14.3 416 32 416C49.7 416 64 401.7 64 384L64 288zM608 256C590.3 256 576 270.3 576 288L576 384C576 401.7 590.3 416 608 416C625.7 416 640 401.7 640 384L640 288C640 270.3 625.7 256 608 256z"/>
      </svg>

      <svg class="nav-icon" data-tab="tab-impact" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M102.8 57.3C108.2 51.9 116.6 51.1 123 55.3L241.9 134.5C250.8 140.4 256.1 150.4 256.1 161.1L256.1 210.7L346.9 301.5C380.2 286.5 420.8 292.6 448.1 320L574.2 446.1C592.9 464.8 592.9 495.2 574.2 514L514.1 574.1C495.4 592.8 465 592.8 446.2 574.1L320.1 448C292.7 420.6 286.6 380.1 301.6 346.8L210.8 256L161.2 256C150.5 256 140.5 250.7 134.6 241.8L55.4 122.9C51.2 116.6 52 108.1 57.4 102.7L102.8 57.3zM247.8 360.8C241.5 397.7 250.1 436.7 274 468L179.1 563C151 591.1 105.4 591.1 77.3 563C49.2 534.9 49.2 489.3 77.3 461.2L212.7 325.7L247.9 360.8zM416.1 64C436.2 64 455.5 67.7 473.2 74.5C483.2 78.3 485 91 477.5 98.6L420.8 155.3C417.8 158.3 416.1 162.4 416.1 166.6L416.1 208C416.1 216.8 423.3 224 432.1 224L473.5 224C477.7 224 481.8 222.3 484.8 219.3L541.5 162.6C549.1 155.1 561.8 156.9 565.6 166.9C572.4 184.6 576.1 203.9 576.1 224C576.1 267.2 558.9 306.3 531.1 335.1L482 286C448.9 253 403.5 240.3 360.9 247.6L304.1 190.8L304.1 161.1L303.9 156.1C303.1 143.7 299.5 131.8 293.4 121.2C322.8 86.2 366.8 64 416.1 63.9z"/>
      </svg>

      <svg class="nav-icon" data-tab="tab-profile" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
        <path d="M320 312C386.3 312 440 258.3 440 192C440 125.7 386.3 72 320 72C253.7 72 200 125.7 200 192C200 258.3 253.7 312 320 312zM290.3 368C191.8 368 112 447.8 112 546.3C112 562.7 125.3 576 141.7 576L498.3 576C514.7 576 528 562.7 528 546.3C528 447.8 448.2 368 349.7 368L290.3 368z"/>
      </svg>
    </nav>
  </main>

  <script src="script.js"></script>
</body>
</html>
